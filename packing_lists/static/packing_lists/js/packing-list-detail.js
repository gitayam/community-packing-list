(()=>{"use strict";var e,t={635:(e,t,n)=>{var i=n(83);function o(){const e=document.querySelector("[name=csrfmiddlewaretoken]");return e?.value||""}i.A.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",i.A.defaults.headers.common["Content-Type"]="application/json";class r{static instance;constructor(){}static getInstance(){return r.instance||(r.instance=new r),r.instance}async get(e){try{return(await i.A.get(e)).data}catch(e){throw console.error("API GET error:",e),e}}async post(e,t){try{const n={"X-CSRFToken":o()};return t instanceof FormData&&delete n["Content-Type"],(await i.A.post(e,t,{headers:n})).data}catch(e){throw console.error("API POST error:",e),e}}async vote(e,t){const n=new FormData;n.append("price_id",e.toString()),n.append("vote_type",t);try{return(await i.A.post("/handle_vote/",n,{headers:{"X-CSRFToken":o()}})).data}catch(e){throw console.error("Vote error:",e),e}}}class s{static getElement(e){return document.querySelector(e)}static getElementOrThrow(e){const t=this.getElement(e);if(!t)throw new Error(`Element not found: ${e}`);return t}static getElements(e){return Array.from(document.querySelectorAll(e))}static createElement(e,t={},n){const i=document.createElement(e);return Object.entries(t).forEach(([e,t])=>{i.setAttribute(e,t)}),n&&(i.textContent=n),i}static addEventListeners(e,t){Object.entries(t).forEach(([t,n])=>{e.addEventListener(t,n)})}static removeEventListeners(e,t){Object.entries(t).forEach(([t,n])=>{e.removeEventListener(t,n)})}}class a{static getFormData(e){return new FormData(e)}static getFormDataAsObject(e){const t=new FormData(e),n={};for(const[e,i]of t.entries())n[e]=i;return n}static setFormData(e,t){Object.entries(t).forEach(([t,n])=>{const i=e.querySelector(`[name="${t}"]`);i&&("checkbox"===i.type?i.checked=Boolean(n):i.value=String(n))})}static clearForm(e){e.reset()}static validateForm(e){return e.checkValidity()}static showFormErrors(e,t){e.querySelectorAll(".form-field-errors").forEach(e=>e.remove()),Object.entries(t).forEach(([t,n])=>{const i=e.querySelector(`[name="${t}"]`);if(i){const e=s.createElement("ul",{class:"form-field-errors"});n.forEach(t=>{const n=s.createElement("li",{},t);e.appendChild(n)}),i.parentNode?.insertBefore(e,i.nextSibling)}})}}class l{static showLoading(e){e.classList.add("loading"),e.disabled=!0,e.textContent="Loading..."}static hideLoading(e,t){e.classList.remove("loading"),e.disabled=!1,e.textContent=t}static showModal(e){const t=s.getElement(`#${e}`);t&&(t.style.display="flex")}static hideModal(e){const t=s.getElement(`#${e}`);t&&(t.style.display="none")}static showNotification(e,t="info"){const n=s.createElement("div",{class:`notification notification-${t}`,style:"\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        padding: 1rem;\n        border-radius: 4px;\n        color: white;\n        z-index: 10000;\n        max-width: 300px;\n        word-wrap: break-word;\n      "},e);n.style.backgroundColor={success:"#28a745",error:"#dc3545",info:"#17a2b8"}[t],document.body.appendChild(n),setTimeout(()=>{n.remove()},5e3)}static formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}static formatDistance(e){return`${e.toFixed(2)} km`}static debounce(e,t){let n;return(...i)=>{clearTimeout(n),n=window.setTimeout(()=>e(...i),t)}}static throttle(e,t){let n;return(...i)=>{n||(e(...i),n=!0,setTimeout(()=>n=!1,t))}}}r.getInstance();var c=n(591),d=n(24),u=n(744),h=n(734);class p{filterInput=null;table=null;toggleBtn=null;tableWrapper=null;rows=[];sortableHeaders=[];currentSortState={column:"",direction:"asc"};unsubscribe;constructor(){this.initialize(),this.injectActionButtonIcons()}initialize(){d.vF.info("Initializing PackingListDetailManager","packing_list"),this.setupStateManagement(),this.setupElements(),this.setupEventListeners(),this.setupTableFunctionality(),this.setupModalFunctionality(),this.setupVoteFunctionality(),this.setupFilterFunctionality(),this.preloadData()}setupStateManagement(){this.unsubscribe=u.XJ.subscribe((e,t)=>{this.handleStateChange(e,t)})}handleStateChange(e,t){e.ui.loading!==t.ui.loading&&this.updateLoadingState(e.ui.loading)}updateLoadingState(e){const t=s.getElement("#loading-indicator");t&&(t.style.display=e?"block":"none")}setupElements(){this.filterInput=s.getElement("#item-table-filter"),this.table=s.getElement(".modern-table"),this.toggleBtn=s.getElement("#toggle-columns"),this.tableWrapper=s.getElement(".modern-table-wrapper"),this.table&&this.filterInput&&this.toggleBtn&&this.tableWrapper?(this.rows=s.getElements("tbody tr.item-row"),this.sortableHeaders=s.getElements(".modern-table th.sortable")):d.vF.warn("Table elements not found, skipping table functionality","packing_list")}setupEventListeners(){if(!this.filterInput)return;this.filterInput.addEventListener("input",this.handleFilterInput.bind(this));const e=s.getElement("#clear-filters");e&&e.addEventListener("click",this.handleClearFilters.bind(this)),this.toggleBtn&&this.toggleBtn.addEventListener("click",this.handleColumnToggle.bind(this)),this.sortableHeaders.forEach(e=>{e.addEventListener("click",this.handleSortClick.bind(this))}),document.addEventListener("click",this.handleGlobalClick.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}setupTableFunctionality(){}setupModalFunctionality(){document.addEventListener("click",this.handlePriceModalClick.bind(this)),document.addEventListener("click",this.handleEditItemModalClick.bind(this)),document.addEventListener("click",this.handleAnonymousIndicatorClick.bind(this));const e=s.getElement("#close-price-modal");e&&e.addEventListener("click",()=>{this.hideModal("price-modal")});const t=s.getElement("#close-edit-item-modal");t&&t.addEventListener("click",()=>{this.hideModal("edit-item-modal")})}setupVoteFunctionality(){document.addEventListener("click",this.handleVoteClick.bind(this))}setupFilterFunctionality(){const e=s.getElement("#base-filter-form"),t=s.getElement("#clear-base-filter");if(t&&t.addEventListener("click",this.handleClearBaseFilter.bind(this)),e){const e=s.getElement("#base-select"),t=s.getElement("#radius-select");e&&e.addEventListener("change",this.handleBaseSelectChange.bind(this)),t&&t.addEventListener("change",this.handleRadiusSelectChange.bind(this))}}handleFilterInput(e){const t=e.target.value.toLowerCase();this.rows.forEach(e=>{const n=(e.dataset.itemName||"").includes(t);e.style.display=n?"":"none"})}handleClearFilters(){this.filterInput&&(this.filterInput.value="",this.rows.forEach(e=>e.style.display=""))}handleColumnToggle(){this.toggleBtn&&this.tableWrapper&&(this.tableWrapper.classList.contains("show-hidden-columns")?(this.tableWrapper.classList.remove("show-hidden-columns"),this.toggleBtn.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-columns"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="9" y2="15"></line><line x1="15" y1="9" x2="15" y2="15"></line></svg>\n        Show Details\n      '):(this.tableWrapper.classList.add("show-hidden-columns"),this.toggleBtn.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye-off"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>\n        Hide Details\n      '))}handleSortClick(e){const t=e.target,n=t.dataset.sort||"",i=t.classList.contains("sort-asc")?"asc":t.classList.contains("sort-desc")?"desc":"none";this.sortableHeaders.forEach(e=>e.classList.remove("sort-asc","sort-desc")),"none"===i||"desc"===i?(t.classList.add("sort-asc"),this.sortTable(n,"asc")):(t.classList.add("sort-desc"),this.sortTable(n,"desc"))}sortTable(e,t){if(!this.table)return;const n=this.table.querySelector("tbody");if(!n)return;const i=Array.from(n.querySelectorAll("tr")),o=(i.filter(e=>e.classList.contains("section-header-row")),i.filter(e=>e.classList.contains("item-row"))),r=(e,t,n="")=>{const i=e.querySelector(t);return i&&i.textContent?.trim().toLowerCase()||n};o.sort((n,i)=>{let o,s;switch(e){case"name":o=r(n,".item-name-cell"),s=r(i,".item-name-cell");break;case"quantity":o=parseInt(r(n,".quantity-cell"),10)||0,s=parseInt(r(i,".quantity-cell"),10)||0;break;case"required":o=r(n,".required-cell"),s=r(i,".required-cell");break;case"store":o=r(n,".store-cell"),s=r(i,".store-cell");break;case"price":o=parseFloat(r(n,".price-cell").replace(/[^\d.]/g,""))||0,s=parseFloat(r(i,".price-cell").replace(/[^\d.]/g,""))||0;break;default:o="",s=""}return o<s?"asc"===t?-1:1:o>s?"asc"===t?1:-1:0}),o.forEach(e=>n.appendChild(e))}handleGlobalClick(e){const t=e.target;t.closest(".price-details-btn")&&this.handlePriceDetailsClick(t.closest(".price-details-btn")),t.closest(".price-details")||t.closest(".price-details-btn")||t.closest(".price-details-backdrop")||this.hidePriceDetails()}handlePriceDetailsClick(e){const t=e.dataset.itemId;if(!t)return;const n=s.getElement(`#price-details-${t}`);if(!n)return;document.querySelectorAll(".price-details").forEach(e=>{e!==n&&(e.style.display="none")});const i=document.querySelector(".price-details-backdrop");if(i&&i.remove(),"none"!==n.style.display&&n.style.display)this.hidePriceDetails();else{const t=s.createElement("div",{class:"price-details-backdrop"});t.onclick=()=>this.hidePriceDetails(),document.body.appendChild(t),n.style.display="block";const i=e.getBoundingClientRect(),o={width:window.innerWidth,height:window.innerHeight};let r,a;if(o.width<=768)n.style.top="",n.style.left="";else{const e=350,t=250;r=i.bottom+8,r+t>o.height-20&&(r=i.top-t-8),r=Math.max(20,r),a=i.left-e/2+i.width/2,a=Math.max(10,Math.min(a,o.width-e-10)),n.style.top=r+"px",n.style.left=a+"px"}}}hidePriceDetails(){document.querySelectorAll(".price-details").forEach(e=>{e.style.display="none"});const e=document.querySelector(".price-details-backdrop");e&&e.remove()}handleKeyDown(e){"Escape"===e.key&&(this.hidePriceDetails(),this.hideAnonymousPopup())}async handleAnonymousIndicatorClick(e){const t=e.target;if(t.closest(".anonymous-indicator")){const e=t.closest(".anonymous-indicator"),n=e.dataset.priceId;if(!n)return;try{const t=await c.K.get(`/api/price/${n}/anonymous-info/`);t.success&&t.data&&this.showAnonymousPopup(e,t.data)}catch(e){console.error("Error loading anonymous info:",e)}}}showAnonymousPopup(e,t){const n=s.getElement("#anonymous-popup");if(!n)return;const i=n.querySelector("#trust-fill"),o=n.querySelector("#trust-percentage"),r=n.querySelector("#trust-level"),a=n.querySelector("#confidence-level"),l=n.querySelector("#submitter-id"),c=n.querySelector("#verification-badges"),d=n.querySelector("#warning-badges");i&&(i.style.width=100*t.trust_score+"%",i.className=`trust-fill ${t.trust_color}`),o&&(o.textContent=`${Math.round(100*t.trust_score)}%`),r&&(r.textContent=t.trust_level),a&&(a.textContent=t.confidence_adjusted.charAt(0).toUpperCase()+t.confidence_adjusted.slice(1)),l&&(l.textContent=`...${t.ip_hash}`),c&&(c.innerHTML="",t.is_verified&&(c.innerHTML='<span class="verified-badge">âœ“ Verified</span>')),d&&(d.innerHTML="",t.flagged_count>0&&(d.innerHTML=`<span class="flagged-warning">âš  ${t.flagged_count} flags</span>`));const u=e.getBoundingClientRect(),h=window.innerWidth,p=window.innerHeight;if(h<=768)n.style.position="fixed",n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)";else{n.style.position="absolute",n.style.transform="none";let e=u.bottom+8,t=u.left-125;e+200>p&&(e=u.top-200-8),t<10&&(t=10),t+250>h-10&&(t=h-260),n.style.top=e+"px",n.style.left=t+"px"}n.classList.add("show")}hideAnonymousPopup(){const e=s.getElement("#anonymous-popup");e&&e.classList.remove("show")}async handlePriceModalClick(e){const t=e.target;if(t.closest(".add-price-btn")){e.preventDefault(),e.stopPropagation();const n=t.closest(".add-price-btn"),i=n.dataset.itemId,o=n.dataset.listId;if(!i||!o)return;this.showButtonLoading(n);try{const e=`/item/${i}/add_price_modal/to_list/${o}/`,t=await c.K.get(e,{useCache:!1});if(t.html){const e=document.createElement("div");e.innerHTML=t.html;const n=new h.a({title:"Add Price",content:e,size:"md"});n.on("open",()=>{const t=e.querySelector("form");t&&this.setupPriceFormSubmission(t,i,o),setTimeout(()=>{const t=e.querySelector("input, select, textarea");t&&t.focus()},100)}),await n.open()}}catch(e){d.vF.error("Error loading add price modal","packing_list",e),u.ph.addNotification("Error loading price form. Please try again.","error")}finally{this.hideButtonLoading(n,"Add Price")}}else if(t.closest(".edit-price-btn")){e.preventDefault(),e.stopPropagation();const n=t.closest(".edit-price-btn"),i=n.dataset.priceId,o=n.dataset.listId;if(!i||!o)return;this.showButtonLoading(n);try{const e=`/list/${o}/price/${i}/edit_modal/`,t=await c.K.get(e,{useCache:!1});if(t.html){const e=document.createElement("div");e.innerHTML=t.html;const n=new h.a({title:"Edit Price",content:e,size:"md"});n.on("open",()=>{const t=e.querySelector("form");t&&this.setupPriceFormSubmission(t,"",o),setTimeout(()=>{const t=e.querySelector("input, select, textarea");t&&t.focus()},100)}),await n.open()}}catch(e){d.vF.error("Error loading edit price modal","packing_list",e),u.ph.addNotification("Error loading price form. Please try again.","error")}finally{this.hideButtonLoading(n,"Edit")}}else if(t.closest(".expand-price-btn")){const e=t.closest(".expand-price-btn");if(!e.dataset.itemId)return Promise.resolve();this.handlePriceDetailsClick(e)}return Promise.resolve()}setDefaultFormValues(e){const t=e.querySelector("#id_quantity");t&&(t.value||(t.value="1"),t.required=!0);const n=e.querySelector("#id_price");n&&(n.required=!0,n.placeholder="Enter price (e.g. 9.99)");const i=e.querySelector("#id_store");if(i&&!i.value){const e=i.querySelectorAll("option");for(let t=1;t<e.length;t++)if(e[t].value&&"__add_new__"!==e[t].value){i.value=e[t].value;break}}const o=e.querySelector("#id_date_purchased");if(o&&!o.value){const e=(new Date).toISOString().split("T")[0];o.value=e}}setupStoreSelection(e){const t=e.querySelector("#id_store"),n=e.querySelector("#inline-add-store"),i=e.querySelector("#id_store_name");t&&n&&(Array.from(t.options),t.addEventListener("change",()=>{"__add_new__"===t.value?(n.style.display="block",i&&(i.required=!0,i.focus())):(n.style.display="none",i&&(i.required=!1,i.value=""))}),"__add_new__"===t.value&&(n.style.display="block",i&&(i.required=!0)))}setupPriceFormSubmission(e,t,n){this.setDefaultFormValues(e),this.setupStoreSelection(e),e.querySelectorAll(".quick-price-btn").forEach(t=>{t.addEventListener("click",t=>{const n=t.target.dataset.price,i=e.querySelector("#id_price");n&&i&&(i.value=n,i.focus(),i.dispatchEvent(new Event("input")))})}),e.querySelectorAll(".set-quantity-btn").forEach(t=>{t.addEventListener("click",t=>{const n=t.target.dataset.quantity,i=e.querySelector("#id_quantity");n&&i&&(i.value=n,i.dispatchEvent(new Event("input")))})}),e.addEventListener("submit",async i=>{if(i.preventDefault(),!e.checkValidity())return void e.reportValidity();const o=e.querySelector('button[type="submit"]');o&&l.showLoading(o);try{const i=a.getFormData(e),o=i.get("price"),r=i.get("quantity"),l=i.get("store"),c=i.get("store_name");if(!o)return void u.ph.addNotification("Price is required","error");if(!r)return void u.ph.addNotification("Quantity is required","error");if(!l&&!c)return void u.ph.addNotification("Please select a store or enter a new store name","error");const d=await fetch(e.action,{method:"POST",body:i,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]")?.value||""}});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const p=await d.json();if(p.success)h.a.alert("Price added successfully!","Success"),location.reload();else if(p.html){const e=s.getElement("#price-modal-body");if(e){e.innerHTML=p.html;const i=e.querySelector("form");i&&this.setupPriceFormSubmission(i,t,n)}}else p.message?u.ph.addNotification(p.message,"error"):u.ph.addNotification("Unknown error occurred","error")}catch(e){u.ph.addNotification("Error adding price. Please try again.","error")}finally{o&&this.hideButtonLoading(o,"Save Price")}})}async handleEditItemModalClick(e){const t=e.target;if(t.closest(".edit-item-btn")){e.preventDefault(),e.stopPropagation();const n=t.closest(".edit-item-btn"),i=n.dataset.pliId,o=n.dataset.listId;if(!i||!o)return;this.showButtonLoading(n);try{const e=await c.K.get(`/list/${o}/item/${i}/edit_modal/`);if(e.html){const t=document.createElement("div");t.innerHTML=e.html;const n=new h.a({title:"Edit Item",content:t,size:"md"});n.on("open",()=>{const e=t.querySelector("form");e&&this.setupEditItemFormSubmission(e,i,o),setTimeout(()=>{const e=t.querySelector("input, select, textarea");e&&e.focus()},100)}),await n.open()}}catch(e){d.vF.error("Error loading edit item modal","packing_list",e),u.ph.addNotification("Error loading edit form. Please try again.","error")}finally{this.hideButtonLoading(n,"Edit")}return Promise.resolve()}}setupEditItemFormSubmission(e,t,n){e.addEventListener("submit",async i=>{i.preventDefault();const o=e.querySelector('button[type="submit"]');o&&l.showLoading(o);try{const i=a.getFormData(e),o=await c.K.post(e.action,i);if(o.success)h.a.alert("Item updated successfully!","Success"),location.reload();else if(o.html){const e=s.getElement("#edit-item-modal-body");if(e){e.innerHTML=o.html;const i=e.querySelector("form");i&&this.setupEditItemFormSubmission(i,t,n)}}}catch(e){u.ph.addNotification("Error updating item. Please try again.","error")}finally{o&&this.hideButtonLoading(o,"Save Changes")}})}async handleVoteClick(e){const t=e.target;if(t.classList.contains("vote-btn")){const e=t.dataset.priceId;if(!e)return;const n=t.classList.contains("upvote");t.disabled=!0;try{const i=await c.K.vote(parseInt(e),n?"up":"down");if(i.success){const e=t.closest(".price-entry");if(e){const t=e.querySelector(".vote-btn.upvote"),n=e.querySelector(".vote-btn.downvote");t&&(t.innerHTML=t.innerHTML.replace(/\d+/,i.upvotes.toString())),n&&(n.innerHTML=n.innerHTML.replace(/\d+/,i.downvotes.toString()))}const o=t.textContent||"";t.textContent=n?"âœ“":"âœ—",setTimeout(()=>{t.textContent=o},1e3)}else u.ph.addNotification(i.message||"Error voting. Please try again.","error")}catch(e){u.ph.addNotification("Error voting. Please try again.","error")}finally{t.disabled=!1}}}handleClearBaseFilter(){const e=s.getElement("#base-select"),t=s.getElement("#radius-select");e&&(e.disabled=!1),t&&(t.disabled=!1);const n=new URL(window.location.href);n.searchParams.delete("base_filter"),n.searchParams.delete("radius"),window.location.href=n.toString()}handleBaseSelectChange(e){const t=e.target;if(t.value){const e=t.closest("form");e&&e.submit()}}handleRadiusSelectChange(e){const t=e.target,n=s.getElement("#base-select");if(n?.value){const e=t.closest("form");e&&e.submit()}}injectActionButtonIcons(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-dollar-sign"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>',t='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bar-chart"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>',n='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>',i='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon></svg>',o=(r=1)=>{const s=document.querySelectorAll(".add-price-btn .btn-icon");s.forEach(t=>{"$"!==t.textContent?.trim()&&""!==t.innerHTML.trim()||(t.innerHTML=e)});const a=document.querySelectorAll(".expand-price-btn .btn-icon");a.forEach(e=>{(e.textContent?.includes("ðŸ“Š")||""===e.innerHTML.trim())&&(e.innerHTML=t)});const l=document.querySelectorAll(".edit-item-btn .btn-icon");l.forEach(e=>{"âœ"!==e.textContent?.trim()&&""!==e.innerHTML.trim()||(e.innerHTML=n)});const c=document.querySelectorAll(".review-btn .btn-icon");c.forEach(e=>{"â˜…"!==e.textContent?.trim()&&""!==e.innerHTML.trim()||(e.innerHTML=i)});const d=s.length+a.length+l.length+c.length;0===document.querySelectorAll(".action-btn svg").length&&r<3&&d>0&&setTimeout(()=>o(r+1),100)};o()}hideModal(e){const t=s.getElement(`#${e}`);t&&(t.style.display="none")}showButtonLoading(e){e.classList.add("loading"),e.disabled=!0,e.dataset.originalText=e.textContent||"",e.textContent="Loading..."}hideButtonLoading(e,t){e.classList.remove("loading"),e.disabled=!1,e.textContent=t}async preloadData(){try{const e=["/api/recent-prices/","/api/user-location/"];await c.K.preload(e),d.vF.debug("Data preloading completed","packing_list")}catch(e){d.vF.warn("Failed to preload some data","packing_list",e)}}destroy(){this.unsubscribe&&this.unsubscribe(),d.vF.info("PackingListDetailManager destroyed","packing_list")}}function m(){const e=new p;window.packingListManager=e;const t=document.querySelector("#price-form");if(t){const n=t.dataset.itemId||"",i=t.dataset.listId||"";e.setupPriceFormSubmission(t,n,i)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m(),window.hidePriceDetails=function(){const e=window.packingListManager;e&&e.hidePriceDetails()},window.hideAnonymousPopup=function(){const e=window.packingListManager;e&&e.hideAnonymousPopup()}}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,n,o,r)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,o,r]=e[d],a=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(i.O).every(e=>i.O[e](n[l]))?n.splice(l--,1):(a=!1,r<s&&(s=r));if(a){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={565:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[s,a,l]=n,c=0;if(s.some(t=>0!==e[t])){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(l)var d=l(i)}for(t&&t(n);c<s.length;c++)r=s[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},n=self.webpackChunkcommunity_packing_list=self.webpackChunkcommunity_packing_list||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[804],()=>i(635));o=i.O(o)})();
//# sourceMappingURL=packing-list-detail.js.map