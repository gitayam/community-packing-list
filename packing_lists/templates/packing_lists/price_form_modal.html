{% load static %}

<div class="form-container" id="price-modal-body">
    <h3>{{ title }}</h3>
    <p class="mb-2">Adding price for item: <strong>{{ item.name }}</strong></p>

    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {% for error in form.non_field_errors %}
          <div>{{ error }}</div>
        {% endfor %}
      </div>
    {% endif %}

    {% if list_id %}
        <form method="post" id="price-form" action="{% url 'add_price_for_item' item_id=item.id list_id=list_id %}">
    {% else %}
        <form method="post" id="price-form" action="{% url 'add_price_for_item_no_list' item_id=item.id %}">
    {% endif %}
        {% csrf_token %}
        
        <!-- Store Selection -->
        <div class="form-group">
            {{ form.store.label_tag }}
            {{ form.store }}
            {% if form.store.errors %}
              <div class="text-danger">
                {% for error in form.store.errors %}
                  <div>{{ error }}</div>
                {% endfor %}
              </div>
            {% endif %}
            {% if form.store.help_text %}
              <small class="form-text text-muted">{{ form.store.help_text }}</small>
            {% endif %}
        </div>

        <!-- Add New Store Section -->
        <div id="inline-add-store" class="form-group" style="display: none;">
            {{ form.store_name.label_tag }}
            {{ form.store_name }}
            {% if form.store_name.errors %}
              <div class="text-danger">
                {% for error in form.store_name.errors %}
                  <div>{{ error }}</div>
                {% endfor %}
              </div>
            {% endif %}
            {% if form.store_name.help_text %}
              <small class="form-text text-muted">{{ form.store_name.help_text }}</small>
            {% endif %}
        </div>

        <!-- Price Field -->
        <div class="form-group">
            {{ form.price.label_tag }}
            {{ form.price }}
            {% if form.price.errors %}
              <div class="text-danger">
                {% for error in form.price.errors %}
                  <div>{{ error }}</div>
                {% endfor %}
              </div>
            {% endif %}
            {% if form.price.help_text %}
              <small class="form-text text-muted">{{ form.price.help_text }}</small>
            {% endif %}
        </div>

        <!-- Quantity Field -->
        <div class="form-group">
            {{ form.quantity.label_tag }}
            {{ form.quantity }}
            {% if form.quantity.errors %}
              <div class="text-danger">
                {% for error in form.quantity.errors %}
                  <div>{{ error }}</div>
                {% endfor %}
              </div>
            {% endif %}
            {% if form.quantity.help_text %}
              <small class="form-text text-muted">{{ form.quantity.help_text }}</small>
            {% endif %}
        </div>

        <!-- Date Purchased Field -->
        <div class="form-group">
            {{ form.date_purchased.label_tag }}
            {{ form.date_purchased }}
            {% if form.date_purchased.errors %}
              <div class="text-danger">
                {% for error in form.date_purchased.errors %}
                  <div>{{ error }}</div>
                {% endfor %}
              </div>
            {% endif %}
            {% if form.date_purchased.help_text %}
              <small class="form-text text-muted">{{ form.date_purchased.help_text }}</small>
            {% endif %}
        </div>

        <div class="form-actions">
            <button type="submit" class="button success">Save Price</button>
            <button type="button" class="button secondary" onclick="document.getElementById('price-modal').style.display='none'">Cancel</button>
        </div>
    </form>
</div>

 